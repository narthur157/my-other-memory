<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>My Other Memory</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
 
    <link rel="stylesheet" href="css/ionic.css">
 
    <script src="js/ionic.js"></script>
    <script src="js/ionic-angular.js"></script>
 
    <!-- AngularFire/Firebase Extensions -->
    <script src='https://cdn.firebase.com/js/client/2.0.6/firebase.js'></script>
    <script src="https://cdn.firebase.com/js/simple-login/1.6.4/firebase-simple-login.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/0.9.0/angularfire.min.js"></script>
 
    <!-- Needed for Cordova/PhoneGap -->
    <!--<script type="text/javascript" src="cordova.js"></script>-->
    <script src="js/app.js"></script>
 
  </head>
  <body ng-app="todo" ng-controller="TodoCtrl">
<side-menus>
 
    <!-- Center content -->
    <pane side-menu-content>
        <header class="bar bar-header bar-dark">
            <button class="button button-icon" ng-click="toggleProjects()">
                <i class="icon ion-navicon"></i>
            </button>
            <h1 class="title">{{user.lastproject}}</h1>
            <!-- Open notifications button -->
            <button class="button button-clear" ng-click="openNotifications()">
                Notifications
            </button>
            <!-- New Task button-->
            <button class="button button-clear" ng-click="newTask()">
                New
            </button>
        </header>
        <content has-header="true" scroll="false">
            <list>
                <item ng-repeat="task in projectsList[user.lastproject]" ng-hide="!task.done" class="ng-hide">
                    <s>{{task.title}}</s>
                </item>
                <item ng-repeat="task in projectsList[user.lastproject]" ng-hide="task.done" class="ng-hide">
                    {{task.title}}
                </item>
            </list>
            <p> Have you completed the last task? </p>
            <button class="button" ng-click="taskDone(getLastIncTask(projectsList[user.lastproject]))">
                Yes
            </button>
            <button class="button">
                No
            </button>
            <button class="button" ng-click="login()" ng-hide="user.id" class="ng-hide">
                Google Login
            </button>
            <button class="button" ng-click="logout()" ng-hide="!user.id" class="ng-hide">
                Logout
            </button>
            <form ng-submit="sendNotification(projectsList[user.lastproject], user.lastproject, email)">
                <label class="item item-input">
                    <input type="text" placeholder="E-mail to send this project to" ng-model="email">
                </label>
                <div class="padding">
                    <button type="submit" class="button button-full button-primary">Share Project</button>
                </div>
            </form>
        </content>
    </pane>
 
    <!-- Left menu -->
    <side-menu side="left">
        <header class="bar bar-header bar-dark">
            <h1 class="title">Projects</h1>
            <button class="button button-icon" ng-click="newProject()">
                <i class="ion ion-plus"></i>
            </button>
        </header>
        <content has-header="true" scroll="false">
            <list>
            <item ng-repeat="(name, project) in projectsList" ng-click="selectProject(name)" ng-class="{active: user.lastproject == project}">
                    {{name}}
                </item>
            </list>
        </content>
    </side-menu>
 
    <script id="notifications.html" type="text/ng-template">
 
        <div class="modal">
 
            <!-- Modal header bar -->
            <header class="bar bar-header bar-secondary">
                <h1 class="title">Notifications</h1>
                <button class="button button-clear button-primary" ng-click="closeNotifications()">Back</button>
            </header>
 
            <!-- Modal content area -->
            <content has-header="true">
                <list>
                    <item ng-repeat="notification in notifications">
                        {{notification.id}}
                        <button class="button button-icon" ng-click="getProject(notification.id, notification.uid)">
                            <i class="ion ion-plus"></i>
                        </button>
                    </item>
                </list>
            </content>
 
        </div>
 
    </script>
    <script id="new-task.html" type="text/ng-template">
 
        <div class="modal">
 
            <!-- Modal header bar -->
            <header class="bar bar-header bar-secondary">
                <h1 class="title">New Task</h1>
                <button class="button button-clear button-primary" ng-click="closeNewTask()">Cancel</button>
            </header>
 
            <!-- Modal content area -->
            <content has-header="true">
 
                <form ng-submit="createTask(task)">
                    <div class="list">
                        <label class="item item-input">
                            <input type="text" placeholder="What do you need to do?" ng-model="task.title">
                        </label>
                    </div>
                    <div class="padding">
                        <button type="submit" class="button button-full button-primary">Create Task</button>
                    </div>
                </form>
 
            </content>
 
        </div>
 
    </script>
 
</side-menus>
</body>
</html>